<!doctype html><html lang="en"><head><meta charset="utf-8"><title>advice.land</title><meta name="description" content="advice.land !"><meta property="og:image" content="https://advice.land/img/sample-icon.png"><meta property="og:title" content="advice.land"><meta property="og:description" content="advice.land !"><meta property="og:type" content="website"><meta property="og:url" content="https://advice.land"><meta property="og:locale" content="en_US"><link rel="manifest" href="manifest.json"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><meta name="viewport" content="width=device-width,initial-scale=1"><style>a,abbr,acronym,address,article,aside,b,big,blockquote,body,caption,cite,code,dd,del,dfn,div,dl,dt,em,fieldset,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,nav,object,ol,p,pre,q,samp,section,small,span,strike,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,tt,ul,var{margin:0;padding:0;border:0;outline:0;font-size:100%;font:inherit;vertical-align:baseline}body{line-height:1;background-color:#fff;color:#fff;font-family:Arial,Helvetica,sans-serif;text-align:center;font-size:15pt;width:100%;overflow:hidden;overflow-y:auto}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}a:hover,ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}a{transition:.2s ease-in-out;color:inherit;text-decoration:none}ul{margin:0}b,strong{font-weight:700}i{font-style:italic}button,button:hover,input:focus,input[type=checkcbox]:focus,input[type=submit]:hover,select:focus,textarea:focus{background:0 0;border:0;padding:0;outline:0;line-height:normal;overflow:visible}h1{font-size:19pt}h2{font-size:17pt}p{font-size:15pt}.click-button{cursor:pointer;position:relative;top:0;left:0;display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.click-button::after{content:"";width:100%;height:100%;position:absolute;top:0;left:0;border-radius:12px;display:inline-block;transform:scaleX(1.2) scaleY(1.2);opacity:0;transition:opacity .3s,transform .3s;background:#fff}.click-button:active::after{transform:scaleX(0) scaleY(0);opacity:.8;transition:opacity,transform}.click-button:disabled{color:#888;background-color:#eee;filter:grayscale(100%)}#hidden-templates,.click-button:disabled::after{display:none}#chatframe.here{transform:translateX(0)}#chatframe{position:fixed;z-index:50;top:0;left:0;width:100%;height:100vh;padding:100px 15px 50px;box-sizing:border-box;transform:translateX(-102%);background:#333;transition:transform .3s}#my-video-streams-block{display:flex;position:absolute;bottom:100px;right:0;width:320px;height:160px;background-color:transparent}#desktop-capture-block,#web-cam-block{width:160px;height:160px;background-color:transparent}#incoming-video-streams-block{width:100%;height:calc(100vh - 200px);background-color:#0091ea;border-radius:30px;overflow:hidden}#chat-input-block{position:absolute;bottom:30px;left:50%;transform:translateX(-50%);width:100%}#chat-input-block input{padding:10px;box-sizing:border-box;background-color:rgba(68,68,68,.333);text-align:left;width:100%;border:none;font-size:13pt;color:#fff}#chat-input-block input:focus{background-color:rgba(68,68,68,.6);border:none}#peer-display-block{position:absolute;top:110px;right:0}#peer-display-block .peer-display-element{margin-bottom:10px;padding:10px;width:280px;background-color:rgba(68,68,68,.6);display:flex;justify-content:space-around;align-items:center}#peer-display-block .peer-display-element svg{width:30px;height:30px}#peer-display-block .peer-display-element .peer-name-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#peer-display-block .peer-display-element .peer-call-button,#peer-display-block .peer-display-element .peer-video-button{padding:5px}#peer-display-block .peer-display-element.self{background-color:rgba(68,136,68,.6)}#chat-history-block{position:absolute;display:flex;flex-direction:column-reverse;top:0;left:15px;width:280px;height:100vh;background-color:rgba(68,68,68,.267)}#chat-history-block .chat-element{margin-bottom:7px;padding:5px;font-size:12pt;letter-spacing:.8pt;line-height:120%}#chat-history-block .chat-text{text-align:left;color:#fff}#chat-history-block .chat-time{text-align:right;padding:3px;font-size:7pt;color:#a9a9a9}@media screen and (min-width:600px){#chat-history-block{left:250px!important}#chat-input-block{width:50%;left:40%;transform:none}#my-video-streams-block{right:120px;width:540px;height:270px}#desktop-capture-block,#web-cam-block{width:270px;height:270px}}#footer{width:100%;height:100vh;padding:10px 20px;box-sizing:border-box;background-color:#d1b576;color:#0d1117;text-align:right}#header{display:flex;justify-content:space-between;align-items:center;position:fixed;z-index:99;width:100%;padding:10px 20px;box-sizing:border-box;background-color:rgba(209,181,118,.7);text-align:right}#chat-button{padding:5px}#chat-button svg{width:40px;height:40px}#queryfield{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;align-items:center;min-width:280px;width:calc(100% - 40px);max-width:1280px;box-sizing:border-box;background-color:rgba(13,17,23,.7);border:2px solid #d1b576;border-radius:30px;overflow:hidden}#queryfield input{font-size:15pt;text-overflow:ellipsis;padding:7px 14px;box-sizing:border-box;width:100%;color:#fff;background-color:transparent;text-align:center;border:none}#queryfield input:focus{padding:7px 20px}#queryfield #query-button{padding:10px;background-color:rgba(13,17,23,.8);color:#d1b576}#queryfield #query-button svg{width:20px;height:20px}#svgicon-symbols{display:none}#svgicon-definitions{position:absolute;height:0;width:0;bottom:0;right:0}#hero-section{width:100%;height:80vh;background-image:url(img/hero1.jpg);background-size:cover;background-repeat:no-repeat;background-position:center;position:relative;border-bottom:30px solid #d1b576}#recommendation-section{max-width:1280px;box-sizing:border-box;width:calc(100% - 20px);margin:auto;padding:210px 10px;display:grid;grid-template-columns:1fr;grid-row-gap:90px;grid-column-gap:30px}#recommendation-section .article-preview{position:relative;background-color:#fff;height:240px;border-bottom:30px solid #d1b576;filter:drop-shadow(1px 1px 2px #d1b576);background-image:url(img/hero1.jpg);background-size:cover;background-repeat:no-repeat;background-position:center}#recommendation-section .article-preview h2{position:absolute;top:calc(50% + 15px);left:50%;transform:translate(-50%,-50%);color:#fff;padding:20px;width:100%;box-sizing:border-box;background-color:rgba(65,91,78,.4)}#recommendation-section #entry1.article-preview{background-image:url(img/coffee-2.jpg)}#recommendation-section #entry2.article-preview{background-image:url(img/coffee-not-coffee.jpg)}@media screen and (min-width:640px){#recommendation-section{grid-template-columns:1fr 1fr}}@media screen and (min-width:960px){#recommendation-section{grid-template-columns:1fr 1fr 1fr}}#intermediate-layer{z-index:1;width:100%;position:absolute;top:0;left:0}</style></head><body><svg id="svgicon-definitions"><defs><filter id="svg-dropshadow-filter" height="130%" width="130%"><fegaussianblur in="SourceGraphic" stddeviation="3" result="blurOut"></fegaussianblur><feColorMatrix in="blurOut" type="saturate" values="0.25" result="shadowOut"></feColorMatrix><feblend in="SourceGraphic" in2="shadowOut" mode="normal"></feblend></filter></defs></svg> <svg id="svgicon-symbols"><symbol id="svg-cross-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M19,3H16.3H7.7H5A2,2 0 0,0 3,5V7.7V16.4V19A2,2 0 0,0 5,21H7.7H16.4H19A2,2 0 0,0 21,19V16.3V7.7V5A2,2 0 0,0 19,3M15.6,17L12,13.4L8.4,17L7,15.6L10.6,12L7,8.4L8.4,7L12,10.6L15.6,7L17,8.4L13.4,12L17,15.6L15.6,17Z"></path></symbol><symbol id="svg-menu-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"></path></symbol><symbol id="svg-query-icon" preserveAspectRatio="xMidYMid meet" viewbox="0 0 24 24"><path fill="currentColor" d="M3 21V17H10.5C12.43 17 14 15.43 14 13.5V11H10L16 4L22 11H18V13.5C18 17.64 14.64 21 10.5 21H3Z"></path></symbol><symbol id="svg-phone-icon" preserveAspectRatio="xMidYMid meet" viewbox="0 0 24 24"><path fill="currentColor" d="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z"></path></symbol><symbol id="svg-cam-icon" preserveAspectRatio="xMidYMid meet" viewbox="0 0 24 24"><path fill="currentColor" d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"></path></symbol><symbol id="svg-chat-icon" preserveAspectRatio="xMidYMid meet" viewbox="0 0 24 24"><path fill="currentColor" d="M12,3C17.5,3 22,6.58 22,11C22,15.42 17.5,19 12,19C10.76,19 9.57,18.82 8.47,18.5C5.55,21 2,21 2,21C4.33,18.67 4.7,17.1 4.75,16.5C3.05,15.07 2,13.13 2,11C2,6.58 6.5,3 12,3Z"></path></symbol></svg><div id="hidden-templates"><div id="peer-display-template"><li class="peer-display-element" uuid="{{{uuid}}}"><div class="peer-name-display">{{{uuid}}}</div><div class="peer-call-button click-button"><svg><use href="#svg-phone-icon"></use></svg></div><div class="peer-video-button click-button"><svg><use href="#svg-cam-icon"></use></svg></div></li></div><div id="chat-element-template"><li class="chat-element"><div class="chat-text">{{{text}}}</div><div class="chat-time">{{{time}}}</div></li></div></div><div id="chatframe"><video id="incoming-video-streams-block" autoplay></video><div id="my-video-streams-block"><video id="desktop-capture-block" muted autoplay></video><video id="web-cam-block" muted autoplay></video></div><ul id="chat-history-block"></ul><ul id="peer-display-block"></ul><div id="chat-input-block"><input id="chat-input"></div></div><header><div id="header"><a class="click-button" id="chat-button" href="#chat"><svg><use href="#svg-chat-icon"></use></svg></a><h1><a href="/#top">advice.land</a></h1></div></header><main><div id="hero-section"><div id="queryfield"><input id="query-input"><div class="click-button" id="query-button"><svg><use href="#svg-query-icon"></use></svg></div></div></div><div id="recommendation-section"><a class="article-preview" id="entry1" href="/article1.html"><h2>Sample advice Land Article</h2></a><a class="article-preview" id="entry2" href="/article2.html"><h2>The world is not black and white.<br><br>It is coffee and not coffee.</h2></a><a class="article-preview" id="entry3" href="/article3.html"><h2>Article 3</h2></a><a class="article-preview" id="entry4" href="/article4.html"><h2>Article 4</h2></a><a class="article-preview" id="entry5" href="/article5.html"><h2>Article 5</h2></a><a class="article-preview" id="entry6" href="/article6.html"><h2>Article 6</h2></a><a class="article-preview" id="entry7" href="/article7.html"><h2>Article 7</h2></a><a class="article-preview" id="entry8" href="/article8.html"><h2>Article 8</h2></a><a class="article-preview" id="entry9" href="/article9.html"><h2>Article 9 multi line Article with multiple Lines in the title</h2></a></div></main><footer><div id="footer"></div></footer><script>(()=>{var n={353:(e,t,n)=>{"use strict";n.r(t),n.d(t,{nickName:()=>o});var o="JhonnyJason"},62:function(t,e,n){!function(){var e={name:"indexdomconnect",initialize:function(){n.g.peerDisplayTemplate=document.getElementById("peer-display-template"),n.g.chatElementTemplate=document.getElementById("chat-element-template"),n.g.chatframe=document.getElementById("chatframe"),n.g.incomingVideoStreamsBlock=document.getElementById("incoming-video-streams-block"),n.g.desktopCaptureBlock=document.getElementById("desktop-capture-block"),n.g.webCamBlock=document.getElementById("web-cam-block"),n.g.chatHistoryBlock=document.getElementById("chat-history-block"),n.g.peerDisplayBlock=document.getElementById("peer-display-block"),n.g.chatInput=document.getElementById("chat-input")}};t.exports=e}.call(this)},981:function(w,e,k){!function(){var r,n,o,c,l,a,i,s,u,d,t,p,e,f,h,g,v={name:"statemodule"},m=function(e){null!=allModules.debugmodule.modulesToDebug.statemodule&&console.log("[statemodule]: "+e)},y=function(e){return JSON.stringify(e,null,4)},b=function(e){return m("\n"+y(e))};try{s=k(353)}catch(e){}g=null,r={},d={},a={},p=function(){var e,t;for(t in g=null!=(g=localStorage.getItem("state"))?JSON.parse(g):{})null==(e=g[t])&&(e=null),null!=e&&null!=e.content||(g[t]={content:e}),r[t]=g[t];for(t in s)e=s[t],null==r[t]&&(r[t]={content:e,isVolatile:!0})},u=function(e,t){return e!==t},l=function(e,t){var n=a[e]||u;return null==r[e]||(r[e].content,n(r[e].content,t))},t=function(e){var t;return m("loadDedicated"),t=localStorage.getItem(e),t=JSON.parse(t),r[e]={content:t,isDedicated:!0},t},f=function(e){var t;m("saveDedicatedState"),m(e),b({allStates:r}),t=r[e].content,r[e].isDedicated=!0,t=JSON.stringify(t),localStorage.setItem(e,t)},h=function(){var e;m("saveRegularState"),e=JSON.stringify(g),localStorage.setItem("state",e)},o=function(e,t,n,o){var a,i=null!=r[e]&&r[e].isVolatile;if("boolean"!=typeof n&&(n=null!=r[e]&&!0===r[e].isDedicated),null!=r[e]){if(a=r[e].isDedicated?n!==r[e].isDedicated:n,!(l(e,t)||i||a))return;r[e].content=t,n&&(r[e].isDedicated=!0),a&&!n&&(localStorage.removeItem(e),delete r[e].isDedicated),i&&delete r[e].isVolatile}else r[e]={content:t,isDedicated:n};if(n?(f(e),null!=g[e]&&(delete g[e],h())):(null==g[e]&&(g[e]=r[e]),h()),!o)return c(e)},e=function(){for(var e in m("saveAllStates"),b(r),r)r[e].isDedicated&&f(e);h()},n=function(e,t,n){if(l(e,t)){try{r[e].content=t}catch(n){r[e]={content:t,isVolatile:!0}}if(!n)return c(e)}},i=function(e){var t;if(1!==(t=Object.keys(e)).length)throw new Error("Object did not have exactly one Member!");return{key:t=t[0],content:e[t]}},c=async function(a){var i,e;if(null!=d[a])return e=function(){for(var e,t=[],n=0,o=(e=d[a]).length;n<o;n++)i=e[n],t.push(i());return t}(),Promise.all(e)},v.getState=function(){return r},v.load=function(e){return m("statemodule.load"),b({allStates:r}),null!=r[e]&&r[e].isVolatile?r[e].content:null==r[e]||r[e].isDedicated?t(e):(p(),r[e].content)},v.save=function(e,t,n){if(m("statemodule.save"),null!=e)return"object"==typeof e&&({key:e,content:t}=i(e)),null==t&&null==n?f(e):o(e,t,n,!1)},v.saveSilently=function(e,t,n){return m("statemodule.saveSilently"),"object"==typeof e&&({key:e,content:t}=i(e)),o(e,t,n,!0)},v.saveAll=e,v.saveRegularState=h,v.remove=function(e){if(m("statemodule.remove"),null!=r[e])if(r[e].isVolatile)delete r[e];else{if(r[e].isDedicated)return localStorage.removeItem(e),void delete r[e];delete r[e],delete g[e],h()}},v.get=function(e){if(null!=r[e])return r[e].content},v.set=function(e,t){m("statemodule.set"),"object"==typeof e&&({key:e,content:t}=i(e)),n(e,t,!1)},v.setSilently=function(e,t){m("statemodule.setSilently"),"object"==typeof e&&({key:e,content:t}=i(e)),n(e,t,!0)},v.addOnChangeListener=function(e,t){m("statemodule.addOnChangeListener"),null==d[e]&&(d[e]=[]),d[e].push(t)},v.removeOnChangeListener=function(e,t){var n,o,a,i;if(m("statemodule.removeOnChangeListener"),null!=(n=d[e])){for(o=a=0,i=n.length;a<i;o=++a)if(n[o]===t)return m("candidate found at: "+o),n[o]=n[n.length-1],void n.pop();m("No candidate found for given function!")}},v.clearOnChangeListeners=function(e,t){m("statemodule.clearOnChangeListener"),d[e]=[]},v.callOutChange=function(e){return c(e)},v.setChangeDetectionFunction=function(e,t){null==t?delete a[e]:a[e]=t},p(),w.exports=v}.call(this)}},o={};function Xe(e){var t=o[e];if(void 0!==t)return t.exports;t=o[e]={exports:{}};return n[e].call(t.exports,t,t.exports,Xe),t.exports}Xe.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return Xe.d(t,{a:t}),t},Xe.d=(e,t)=>{for(var n in t)Xe.o(t,n)&&!Xe.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Xe.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),Xe.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Xe.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={},t=(Xe.r(e),Xe.d(e,{startUp:()=>W}),{}),n=(Xe.r(t),Xe.d(t,{appId:()=>Z,defaultChannelId:()=>_,p2pBootstrapPeers:()=>F,p2pWRTCStarServers:()=>$,reconnectTimeoutMS:()=>q,websocketURL:()=>Q}),{}),o=(Xe.r(n),Xe.d(n,{connect:()=>ie,disconnect:()=>re,getUUID:()=>w,initialize:()=>X,sendMessage:()=>b}),{}),a=(Xe.r(o),Xe.d(o,{handleSDP:()=>ye,initialize:()=>ce,initiateConnection:()=>k}),{}),i=(Xe.r(a),Xe.d(a,{addChatMessage:()=>qe,displayPeers:()=>Qe,initialize:()=>xe}),{});Xe.r(i),Xe.d(i,{modulesToDebug:()=>Ze});function r(t){var n;return{log:n=function(e){V[t]&&console.log("["+t+"]: "+e)},olog:function(e){return n("\n"+J(e))}}}var P,R,c={},J=(Xe.r(c),Xe.d(c,{initialize:()=>Fe}),function(e){return JSON.stringify(e,null,4)}),V={};({log:P,olog:R}=r("appstartupmodule"));var l,s,z,u,A,d,p,f,h,g,H,v,m,y,W=function(){P("startUp")},Q="wss://signalling-star.advice.land",q=200,Z="p2p-chat-demo",_="#1",F=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt"],$=["/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star"],X=({log:u,olog:A}=r("websocketmodule"),s=!(d=!1),h=f=p=null,l=crypto.randomUUID(),function(){u("initialize")}),G=function(e){u("websocketCaughtError"),A(e),u(e.reason)},K=function(e){s||d||(d=!0,setTimeout(oe,q))},Y=function(e){u("websocketConnected"),null!=h&&(h(),h=null),b("setuuid "+l)},ee=function(e){var t,n,o;switch(u("websocketMessageReceived"),u(e.data),(o=e.data.indexOf(" "))<0?n=e.data.trim():(n=e.data.substring(0,o),t=e.data.substring(o).trim()),n){case"alluids":te(t);break;case"chat":ne(t);break;case"sdp":ye(t);break;default:u("unknown key "+n)}},te=function(e){u("applyAllUUIDS"),z=e.split(","),Qe(z)},ne=function(e){u("handleChat"),u(e),qe(e)},oe=function(){d=!1,ae()},ae=function(){u("createSocket"),"undefined"!=typeof webSocketReady&&null!==webSocketReady||(f=new Promise(function(e,t){return h=e})),(p=new WebSocket(Q)).onerror=G,p.onclose=K,p.onopen=Y,p.onmessage=ee},b=async function(e){u("sendMessage "+e),s||(await f,p.send(e))},ie=function(){s=!1,ae()},re=function(){null!==p&&(s=!0,p.close(),p=null)},w=function(){return l},ce=({log:g,olog:H}=r("webrtcmodule"),y={},m={},v=null,function(){g("initialize")}),le=function(e){se(e)},se=async function(e){var t,n,o,a,i,r,c,l,s,u;g("initiateConnectionForVideo"),o=ue(),(y[e]=o).adviceLandType="outConnection",o.adviceLandUUID=e,a={video:!0,audio:!0};try{for(null==v&&(v=await navigator.mediaDevices.getUserMedia(a),webCamBlock.srcObject=v),u=v.getTracks(),r=0,c=u.length;r<c;r++)s=u[r],o.addTrack(s,v);l=await o.createOffer(),i=new RTCSessionDescription(l),await o.setLocalDescription(i),t={type:"video-offer",sourceUUID:w(),targetUUID:e,offerObj:l},n=JSON.stringify(t),b(`sdp ${e} `+n)}catch(e){g(e)}},ue=function(){var e;return g("createRTCPeerConnection"),(e=new RTCPeerConnection({iceServers:[{urls:"turn:stun.advice.land",username:"usr",credential:"cred"}]})).onicecandidate=de,e.ontrack=pe,e.onnegotiationneeded=fe,e.onremovetrack=he,e.oniceconnectionstatechange=ge,e.onicegatheringstatechange=ve,e.onsignalingstatechange=me,e},de=function(e){var t,n;g("handleICECandidateEvent"),H(e.candidate),g(e.target.adviceLandType),g(e.target.adviceLandUUID),null!=e.candidate&&(t=e.candidate,n=e.target.adviceLandType,e=e.target.adviceLandUUID,t={type:"ice-candidate",candidate:t},"outConnection"===n?(t.sourceUUID=w(),t.targetUUID=e,t.youAreTarget=!0):"inConnection"===n&&(t.sourceUUID=e,t.targetUUID=w()),n=JSON.stringify(t),b(`sdp ${e} `+n))},pe=function(e){g("handleTrackEvent"),incomingVideoStreamsBlock.srcObject=event.streams[0]},fe=function(e){g("handleNegotiationNeededEvent")},he=function(e){g("handleRemoveTrackEvent")},ge=function(e){g("handleICEConnectionStateChangeEvent")},ve=function(e){g("handleICEGatheringStateChangeEvent")},me=function(e){g("handleSignalingStateChangeEvent")},ye=async function(e){var t,n,o,a,i,r,c,l,s,u,d,p,f;g("handleSDP");try{if("video-offer"===(o=JSON.parse(e)).type){for(g("video-offer received"),r={video:!0,audio:!0},u=o.sourceUUID,i=ue(),(m[u]=i).adviceLandType="inConnection",i.adviceLandUUID=u,c=new RTCSessionDescription(o.offerObj),await i.setRemoteDescription(c),null==v&&(v=await navigator.mediaDevices.getUserMedia(r),webCamBlock.srcObject=v),f=v.getTracks(),l=0,s=f.length;l<s;l++)p=f[l],i.addTrack(p,v);t=await i.createAnswer(),c=new RTCSessionDescription(t),await i.setLocalDescription(c),o={type:"video-answer",sourceUUID:o.sourceUUID,targetUUID:o.targetUUID,answerObj:t},a=JSON.stringify(o),b(`sdp ${u} `+a)}"video-answer"===o.type&&(g("video-answer received"),d=o.targetUUID,i=y[d],c=new RTCSessionDescription(o.answerObj),await i.setRemoteDescription(c),g(" - > connection should be configured!")),"ice-candidate"===o.type&&(g("ice-candidate received"),n=new RTCIceCandidate(o.candidate),await(i=o.youAreTarget?m[o.sourceUUID]:y[o.targetUUID]).addIceCandidate(n),g(" - > added ICE Candidate"))}catch(e){g(e)}},k=function(e,t){switch(g("initiateConnection"),t){case"call":le(e);break;case"video":se(e)}},be=Object.prototype.toString,B=Array.isArray||function(e){return"[object Array]"===be.call(e)};function C(e){return"function"==typeof e}function x(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function we(e,t){return null!=e&&"object"==typeof e&&t in e}var ke=RegExp.prototype.test,Ce=/\S/,Se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},Ue=/\s*/,De=/\s+/,Ie=/\s*=/,Te=/\s*\}/,Ee=/#|\^|\/|>|\{|&|=|!/;function M(e){this.string=e,this.tail=e,this.pos=0}function S(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function U(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}M.prototype.eos=function(){return""===this.tail},M.prototype.scan=function(e){e=this.tail.match(e);if(!e||0!==e.index)return"";e=e[0];return this.tail=this.tail.substring(e.length),this.pos+=e.length,e},M.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},S.prototype.push=function(e){return new S(e,this)},S.prototype.lookup=function(e){var t,n,o,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var i,r,c,l=this,s=!1;l;){if(0<e.indexOf("."))for(i=l.view,r=e.split("."),c=0;null!=i&&c<r.length;)c===r.length-1&&(s=we(i,r[c])||(n=i,o=r[c],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(o))),i=i[r[c++]];else i=l.view[e],s=we(l.view,e);if(s){t=i;break}l=l.parent}a[e]=t}return t=C(t)?t.call(this.view):t},U.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},U.prototype.parse=function(e,L){var t=this.templateCache,n=e+":"+(L||N.tags).join(":"),o=void 0!==t,a=o?t.get(n):void 0;return null==a&&(a=function(e){if(!e)return[];var t,n,o,a,i=!1,r=[],c=[],l=[],s=!1,u=!1,d="",p=0;function f(){if(s&&!u)for(;l.length;)delete c[l.pop()];else l=[];u=s=!1}function h(e){if("string"==typeof e&&(e=e.split(De,2)),!B(e)||2!==e.length)throw new Error("Invalid tags: "+e);t=new RegExp(x(e[0])+"\\s*"),n=new RegExp("\\s*"+x(e[1])),o=new RegExp("\\s*"+x("}"+e[1]))}h(L||N.tags);for(var g,v,m,y,b,w,k=new M(e);!k.eos();){if(g=k.pos,m=k.scanUntil(t))for(var C=0,S=m.length;C<S;++C)a=y=m.charAt(C),ke.call(Ce,a)?(i=u=!0,d+=" "):(l.push(c.length),d+=y),c.push(["text",y,g,g+1]),g+=1,"\n"===y&&(f(),d="",p=0,i=!1);if(!k.scan(t))break;if(s=!0,v=k.scan(Ee)||"name",k.scan(Ue),"="===v?(m=k.scanUntil(Ie),k.scan(Ie),k.scanUntil(n)):"{"===v?(m=k.scanUntil(o),k.scan(Te),k.scanUntil(n),v="&"):m=k.scanUntil(n),!k.scan(n))throw new Error("Unclosed tag at "+k.pos);if(b=">"==v?[v,m,g,k.pos,d,p,i]:[v,m,g,k.pos],p++,c.push(b),"#"===v||"^"===v)r.push(b);else if("/"===v){if(!(w=r.pop()))throw new Error('Unopened section "'+m+'" at '+g);if(w[1]!==m)throw new Error('Unclosed section "'+w[1]+'" at '+g)}else"name"===v||"{"===v||"&"===v?u=!0:"="===v&&h(m)}if(f(),w=r.pop())throw new Error('Unclosed section "'+w[1]+'" at '+k.pos);for(var U,D=function(e){for(var t,n,o=[],a=0,i=e.length;a<i;++a)(t=e[a])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(o.push(t),n=t));return o}(c),I=[],T=I,E=[],O=0,j=D.length;O<j;++O)switch((U=D[O])[0]){case"#":case"^":T.push(U),E.push(U),T=U[4]=[];break;case"/":E.pop()[5]=U[2],T=0<E.length?E[E.length-1][4]:I;break;default:T.push(U)}return I}(e),o&&t.set(n,a)),a},U.prototype.render=function(e,t,n,o){var a=this.getConfigTags(o),a=this.parse(e,a),t=t instanceof S?t:new S(t,void 0);return this.renderTokens(a,t,n,e,o)},U.prototype.renderTokens=function(e,t,n,o,a){for(var i,r,c,l="",s=0,u=e.length;s<u;++s)c=void 0,"#"===(r=(i=e[s])[0])?c=this.renderSection(i,t,n,o,a):"^"===r?c=this.renderInverted(i,t,n,o,a):">"===r?c=this.renderPartial(i,t,n,a):"&"===r?c=this.unescapedValue(i,t):"name"===r?c=this.escapedValue(i,t,a):"text"===r&&(c=this.rawValue(i)),void 0!==c&&(l+=c);return l},U.prototype.renderSection=function(e,t,n,o,a){var i=this,r="",c=t.lookup(e[1]);if(c){if(B(c))for(var l=0,s=c.length;l<s;++l)r+=this.renderTokens(e[4],t.push(c[l]),n,o,a);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)r+=this.renderTokens(e[4],t.push(c),n,o,a);else if(C(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(t.view,o.slice(e[3],e[5]),function(e){return i.render(e,t,n,a)}))&&(r+=c)}else r+=this.renderTokens(e[4],t,n,o,a);return r}},U.prototype.renderInverted=function(e,t,n,o,a){var i=t.lookup(e[1]);if(!i||B(i)&&0===i.length)return this.renderTokens(e[4],t,n,o,a)},U.prototype.indentPartial=function(e,t,n){for(var o=t.replace(/[^ \t]/g,""),a=e.split("\n"),i=0;i<a.length;i++)a[i].length&&(0<i||!n)&&(a[i]=o+a[i]);return a.join("\n")},U.prototype.renderPartial=function(e,t,n,o){if(n){var a,i,r,c=this.getConfigTags(o),l=C(n)?n(e[1]):n[e[1]];if(null!=l)return a=e[6],r=e[5],e=e[4],i=l,0==r&&e&&(i=this.indentPartial(l,e,a)),r=this.parse(i,c),this.renderTokens(r,t,n,i,o)}},U.prototype.unescapedValue=function(e,t){t=t.lookup(e[1]);if(null!=t)return t},U.prototype.escapedValue=function(e,t,n){n=this.getConfigEscape(n)||N.escape,t=t.lookup(e[1]);if(null!=t)return("number"==typeof t&&n===N.escape?String:n)(t)},U.prototype.rawValue=function(e){return e[1]},U.prototype.getConfigTags=function(e){return B(e)?e:e&&"object"==typeof e?e.tags:void 0},U.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!B(e)?e.escape:void 0};var D,Oe,N={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){I.templateCache=e},get templateCache(){return I.templateCache}},I=new U;N.clearCache=function(){return I.clearCache()},N.parse=function(e,t){return I.parse(e,t)},N.render=function(e,t,n,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(B(a=e)?"array":typeof a)+'" was given as the first argument for mustache#render(template, view, partials)');var a;return I.render(e,t,n,o)},N.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return Se[e]})},N.Scanner=M,N.Context=S,N.Writer=U;const je=N;({log:D,olog:Oe}=r("chatframemodule"));var Le,Be,T,E=null,O=null,j=[],xe=function(){D("initialize"),Me(),window.onhashchange=Me,chatInput.addEventListener("keydown",Ne),chatInput.addEventListener("blur",Pe),E=peerDisplayTemplate.innerHTML,D(E),O=chatElementTemplate.innerHTML,D(O)},Me=function(){D("locationHashChanged"),("#chat"===location.hash?Je:Ve)()},Ne=function(e){13===e.keyCode&&chatInput.value&&(Re(),chatInput.value="")},Pe=function(e){chatInput.value&&(Re(),chatInput.value="")},Re=function(){var e=chatInput.value;b("to all "+e)},Je=function(){D("pullChatIn"),document.body.style.height="100vh",document.body.style.overflow="hidden",chatframe.classList.add("here"),ie()},Ve=function(){D("pushChatOut"),document.body.style.height="auto",document.body.style.overflow="scroll",chatframe.classList.remove("here"),re(),chatHistoryBlock.innerHTML="",peerDisplayBlock.innerHTML="",j=[]},ze=function(e){for(var t=0;!e.classList.contains("peer-display-element");)if(e=e.parentNode,3<++t)throw new Error("No nearby parent having class peer-display-element");return e.getAttribute("uuid")},Ae=function(e){D("peerCallClicked"),e=ze(e.target),D(e),k(e,"call")},He=function(e){D("peerVideoClicked"),e=ze(e.target),D(e),k(e,"video")},We=function(){for(var e,t="",n=0,o=j.length;n<o;n++)e=j[n],t+=je.render(O,e);chatHistoryBlock.innerHTML=t},Qe=function(e){for(var t,n,o,a,i,r,c,l,s="",u=0,d=e.length;u<d;u++)t={uuid:e[u]},s+=je.render(E,t);for(peerDisplayBlock.innerHTML=s,null!=(c=peerDisplayBlock.querySelector(`[uuid='${w()}']`))&&c.classList.add("self"),o=0,i=(n=peerDisplayBlock.getElementsByClassName("peer-call-button")).length;o<i;o++)n[o].addEventListener("click",Ae);for(a=0,r=(l=peerDisplayBlock.getElementsByClassName("peer-video-button")).length;a<r;a++)l[a].addEventListener("click",He)},qe=function(e){var t,n;D(e),t=""+(n=new Date).getHours(),n=""+n.getMinutes(),t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),j.unshift({text:e,time:t+":"+n}),64<j.length&&(j.length=64),D(j.length),We()},Ze={unbreaker:!0,websocketmodule:!0,webrtcmodule:!0},_e=Ze;for(T in _e)_e[T]&&(V[T]=!0);({log:Le,olog:Be}=r("queryfieldmodule"));var Fe=function(){Le("initialize")};const L={appstartupmodule:e,chatframemodule:a,configmodule:t,debugmodule:i,queryfieldmodule:c,statemodule:Xe(981),webrtcmodule:o,websocketmodule:n};var $e,e=Xe(62);Xe.n(e)().initialize(),Xe.g.allModules=L,$e=L.appstartupmodule.startUp,async function(){var t,n,e=function(){var e=[];for(n in L)null!=(t=L[n]).initialize&&e.push(t.initialize());return e}();await Promise.all(e),$e()}()})()})()</script></body></html>