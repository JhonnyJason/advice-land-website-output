<!doctype html><html lang="en"><head><meta charset="utf-8"><title>New Website</title><meta name="description" content="The new Website, has just been created!"><meta property="og:image" content="https://"><meta property="og:title" content="New Website"><meta property="og:description" content="The new Website, has just been created!"><meta property="og:type" content="website"><meta property="og:url" content="https://"><meta property="og:locale" content="en_US"><link rel="manifest" href="manifest.json"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><meta name="viewport" content="width=device-width,initial-scale=1"><style>a,abbr,acronym,address,article,aside,b,big,blockquote,body,caption,cite,code,dd,del,dfn,div,dl,dt,em,fieldset,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,nav,object,ol,p,pre,q,samp,section,small,span,strike,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,tt,ul,var{margin:0;padding:0;border:0;outline:0;font-size:100%;font:inherit;vertical-align:baseline}body{line-height:1;background-color:#fff;color:#fff;font-family:Arial,Helvetica,sans-serif;text-align:center;font-size:15pt;width:100%;overflow:hidden;overflow-y:auto}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}a:hover,ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}a{transition:.2s ease-in-out;color:inherit;text-decoration:none}ul{margin:0}b,strong{font-weight:700}i{font-style:italic}button,button:hover,input:focus,input[type=checkcbox]:focus,input[type=submit]:hover,select:focus,textarea:focus{background:0 0;border:0;padding:0;outline:0;line-height:normal;overflow:visible}h1{font-size:19pt}h2{font-size:17pt}p{font-size:15pt}.click-button{cursor:pointer;position:relative;top:0;left:0;display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.click-button::after{content:"";width:100%;height:100%;position:absolute;top:0;left:0;border-radius:12px;display:inline-block;transform:scaleX(1.2) scaleY(1.2);opacity:0;transition:opacity .3s,transform .3s;background:#fff}.click-button:active::after{transform:scaleX(0) scaleY(0);opacity:.8;transition:opacity,transform}.click-button:disabled{color:#888;background-color:#eee;filter:grayscale(100%)}#hidden-templates,.click-button:disabled::after{display:none}#chatframe.here{transform:translateX(0)}#chatframe{position:fixed;z-index:50;top:0;left:0;width:100%;height:100vh;padding:100px 15px 50px;box-sizing:border-box;transform:translateX(-102%);background:#333;transition:transform .3s}#my-video-streams-block{display:flex;position:absolute;bottom:100px;right:0;width:320px;height:160px;background-color:transparent}#desktop-capture-block,#web-cam-block{width:160px;height:160px;background-color:transparent}#incoming-video-streams-block{width:100%;height:calc(100vh - 200px);background-color:#0091ea;border-radius:30px;overflow:hidden}#chat-input-block{position:absolute;bottom:30px;left:50%;transform:translateX(-50%);width:100%}#chat-input-block input{padding:10px;box-sizing:border-box;background-color:rgba(68,68,68,.333);text-align:left;width:100%;border:none;font-size:13pt;color:#fff}#chat-input-block input:focus{background-color:rgba(68,68,68,.6);border:none}#peer-display-block{position:absolute;top:110px;right:0}#peer-display-block .peer-display-element{margin-bottom:10px;padding:10px;width:280px;background-color:rgba(68,68,68,.6);display:flex;justify-content:space-around;align-items:center}#peer-display-block .peer-display-element svg{width:30px;height:30px}#peer-display-block .peer-display-element .peer-name-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#peer-display-block .peer-display-element .peer-call-button,#peer-display-block .peer-display-element .peer-video-button{padding:5px}#peer-display-block .peer-display-element .click-button[disabled]{pointer-events:none;color:grey;opacity:.5}#peer-display-block .peer-display-element.self{background-color:rgba(68,136,68,.6)}#chat-history-block{position:absolute;display:flex;flex-direction:column-reverse;top:0;left:15px;width:280px;height:100vh;background-color:rgba(68,68,68,.267)}#chat-history-block .chat-element{margin-bottom:7px;padding:5px;font-size:12pt;letter-spacing:.8pt;line-height:120%}#chat-history-block .chat-text{text-align:left;color:#fff}#chat-history-block .chat-time{text-align:right;padding:3px;font-size:7pt;color:#a9a9a9}@media screen and (min-width:600px){#chat-history-block{left:250px!important}#chat-input-block{width:50%;left:40%;transform:none}#my-video-streams-block{right:120px;width:540px;height:270px}#desktop-capture-block,#web-cam-block{width:270px;height:270px}}#footer{width:100%;height:100vh;padding:10px 20px;box-sizing:border-box;background-color:#d1b576;color:#0d1117;text-align:right}#header{display:flex;justify-content:space-between;align-items:center;position:fixed;z-index:99;width:100%;padding:10px 20px;box-sizing:border-box;background-color:rgba(209,181,118,.7);text-align:right}#chat-button{padding:5px}#chat-button svg{width:40px;height:40px}#queryfield{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;align-items:center;min-width:280px;width:calc(100% - 40px);max-width:1280px;box-sizing:border-box;background-color:rgba(13,17,23,.7);border:2px solid #d1b576;border-radius:30px;overflow:hidden}#queryfield input{font-size:15pt;text-overflow:ellipsis;padding:7px 14px;box-sizing:border-box;width:100%;color:#fff;background-color:transparent;text-align:center;border:none}#queryfield input:focus{padding:7px 20px}#queryfield #query-button{padding:10px;background-color:rgba(13,17,23,.8);color:#d1b576}#queryfield #query-button svg{width:20px;height:20px}#svgicon-symbols{display:none}#svgicon-definitions{position:absolute;height:0;width:0;bottom:0;right:0}.max-content,main h1,main h2,main p{margin:auto;max-width:1280px;width:calc(100% - 30px);padding-left:15px;padding-right:15px}main{padding-top:90px;padding-bottom:170px;color:#0d1117;text-align:left}main img{max-height:100vh;max-width:100%}main h1{font-size:32pt;font-weight:700;margin-top:50px;margin-bottom:50px;padding-bottom:15px;border-bottom:1px solid #eee}main h2{font-size:24pt;font-weight:700;margin-top:40px;margin-bottom:20px}main p{margin-top:20px;margin-bottom:20px;line-height:120%}</style></head><body><svg id="svgicon-definitions"><defs><filter id="svg-dropshadow-filter" height="130%" width="130%"><fegaussianblur in="SourceGraphic" stddeviation="3" result="blurOut"></fegaussianblur><feColorMatrix in="blurOut" type="saturate" values="0.25" result="shadowOut"></feColorMatrix><feblend in="SourceGraphic" in2="shadowOut" mode="normal"></feblend></filter></defs></svg> <svg id="svgicon-symbols"><symbol id="svg-cross-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M19,3H16.3H7.7H5A2,2 0 0,0 3,5V7.7V16.4V19A2,2 0 0,0 5,21H7.7H16.4H19A2,2 0 0,0 21,19V16.3V7.7V5A2,2 0 0,0 19,3M15.6,17L12,13.4L8.4,17L7,15.6L10.6,12L7,8.4L8.4,7L12,10.6L15.6,7L17,8.4L13.4,12L17,15.6L15.6,17Z"></path></symbol><symbol id="svg-menu-icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"></path></symbol><symbol id="svg-query-icon" preserveAspectRatio="xMidYMid meet" viewbox="0 0 24 24"><path fill="currentColor" d="M3 21V17H10.5C12.43 17 14 15.43 14 13.5V11H10L16 4L22 11H18V13.5C18 17.64 14.64 21 10.5 21H3Z"></path></symbol><symbol id="svg-phone-icon" preserveAspectRatio="xMidYMid meet" viewbox="0 0 24 24"><path fill="currentColor" d="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z"></path></symbol><symbol id="svg-cam-icon" preserveAspectRatio="xMidYMid meet" viewbox="0 0 24 24"><path fill="currentColor" d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"></path></symbol><symbol id="svg-chat-icon" preserveAspectRatio="xMidYMid meet" viewbox="0 0 24 24"><path fill="currentColor" d="M12,3C17.5,3 22,6.58 22,11C22,15.42 17.5,19 12,19C10.76,19 9.57,18.82 8.47,18.5C5.55,21 2,21 2,21C4.33,18.67 4.7,17.1 4.75,16.5C3.05,15.07 2,13.13 2,11C2,6.58 6.5,3 12,3Z"></path></symbol></svg><header><div id="header"><a class="click-button" id="chat-button" href="#chat"><svg><use href="#svg-chat-icon"></use></svg></a><h1><a href="/#top">advice.land</a></h1></div></header><main><h1>Sample Advice Land Article</h1><p><img src="https://hackmd.io/_uploads/ryGzABeqc.jpg" alt=""></p><h2>Much of the Advice is good Advice</h2><p>We know for sure that this is damn good advice. However for some people in some situations opinions may vary. It is important to state here that this variation is already been accounted for so that still almost all of this advice is generally good advice for everybody.</p><h2>Advisory Board needed</h2><p>It seems that a board of advisors might help to generate good advice. Usually they have to be paid, but if they value good advice then we could have the rare case of perpetum generabile of good advice.</p><p><strong>This is the singularity!</strong></p></main><footer><div id="footer"></div></footer><script>(()=>{var n={353:(e,t,n)=>{"use strict";n.r(t),n.d(t,{nickName:()=>o});var o="JhonnyJason"},62:function(t,e,n){!function(){var e={name:"indexdomconnect",initialize:function(){n.g.peerDisplayTemplate=document.getElementById("peer-display-template"),n.g.chatElementTemplate=document.getElementById("chat-element-template"),n.g.chatframe=document.getElementById("chatframe"),n.g.incomingVideoStreamsBlock=document.getElementById("incoming-video-streams-block"),n.g.desktopCaptureBlock=document.getElementById("desktop-capture-block"),n.g.webCamBlock=document.getElementById("web-cam-block"),n.g.chatHistoryBlock=document.getElementById("chat-history-block"),n.g.peerDisplayBlock=document.getElementById("peer-display-block"),n.g.chatInput=document.getElementById("chat-input")}};t.exports=e}.call(this)},981:function(b,e,U){!function(){var r,n,o,c,s,i,a,l,u,d,t,p,e,f,h,g,v={name:"statemodule"},m=function(e){null!=allModules.debugmodule.modulesToDebug.statemodule&&console.log("[statemodule]: "+e)},y=function(e){return JSON.stringify(e,null,4)},w=function(e){return m("\n"+y(e))};try{l=U(353)}catch(e){}g=null,r={},d={},i={},p=function(){var e,t;for(t in g=null!=(g=localStorage.getItem("state"))?JSON.parse(g):{})null==(e=g[t])&&(e=null),null!=e&&null!=e.content||(g[t]={content:e}),r[t]=g[t];for(t in l)e=l[t],null==r[t]&&(r[t]={content:e,isVolatile:!0})},u=function(e,t){return e!==t},s=function(e,t){var n=i[e]||u;return null==r[e]||(r[e].content,n(r[e].content,t))},t=function(e){var t;return m("loadDedicated"),t=localStorage.getItem(e),t=JSON.parse(t),r[e]={content:t,isDedicated:!0},t},f=function(e){var t;m("saveDedicatedState"),m(e),w({allStates:r}),t=r[e].content,r[e].isDedicated=!0,t=JSON.stringify(t),localStorage.setItem(e,t)},h=function(){var e;m("saveRegularState"),e=JSON.stringify(g),localStorage.setItem("state",e)},o=function(e,t,n,o){var i,a=null!=r[e]&&r[e].isVolatile;if("boolean"!=typeof n&&(n=null!=r[e]&&!0===r[e].isDedicated),null!=r[e]){if(i=r[e].isDedicated?n!==r[e].isDedicated:n,!(s(e,t)||a||i))return;r[e].content=t,n&&(r[e].isDedicated=!0),i&&!n&&(localStorage.removeItem(e),delete r[e].isDedicated),a&&delete r[e].isVolatile}else r[e]={content:t,isDedicated:n};if(n?(f(e),null!=g[e]&&(delete g[e],h())):(null==g[e]&&(g[e]=r[e]),h()),!o)return c(e)},e=function(){for(var e in m("saveAllStates"),w(r),r)r[e].isDedicated&&f(e);h()},n=function(e,t,n){if(s(e,t)){try{r[e].content=t}catch(n){r[e]={content:t,isVolatile:!0}}if(!n)return c(e)}},a=function(e){var t;if(1!==(t=Object.keys(e)).length)throw new Error("Object did not have exactly one Member!");return{key:t=t[0],content:e[t]}},c=async function(i){var a,e;if(null!=d[i])return e=function(){for(var e,t=[],n=0,o=(e=d[i]).length;n<o;n++)a=e[n],t.push(a());return t}(),Promise.all(e)},v.getState=function(){return r},v.load=function(e){return m("statemodule.load"),w({allStates:r}),null!=r[e]&&r[e].isVolatile?r[e].content:null==r[e]||r[e].isDedicated?t(e):(p(),r[e].content)},v.save=function(e,t,n){if(m("statemodule.save"),null!=e)return"object"==typeof e&&({key:e,content:t}=a(e)),null==t&&null==n?f(e):o(e,t,n,!1)},v.saveSilently=function(e,t,n){return m("statemodule.saveSilently"),"object"==typeof e&&({key:e,content:t}=a(e)),o(e,t,n,!0)},v.saveAll=e,v.saveRegularState=h,v.remove=function(e){if(m("statemodule.remove"),null!=r[e])if(r[e].isVolatile)delete r[e];else{if(r[e].isDedicated)return localStorage.removeItem(e),void delete r[e];delete r[e],delete g[e],h()}},v.get=function(e){if(null!=r[e])return r[e].content},v.set=function(e,t){m("statemodule.set"),"object"==typeof e&&({key:e,content:t}=a(e)),n(e,t,!1)},v.setSilently=function(e,t){m("statemodule.setSilently"),"object"==typeof e&&({key:e,content:t}=a(e)),n(e,t,!0)},v.addOnChangeListener=function(e,t){m("statemodule.addOnChangeListener"),null==d[e]&&(d[e]=[]),d[e].push(t)},v.removeOnChangeListener=function(e,t){var n,o,i,a;if(m("statemodule.removeOnChangeListener"),null!=(n=d[e])){for(o=i=0,a=n.length;i<a;o=++i)if(n[o]===t)return m("candidate found at: "+o),n[o]=n[n.length-1],void n.pop();m("No candidate found for given function!")}},v.clearOnChangeListeners=function(e,t){m("statemodule.clearOnChangeListener"),d[e]=[]},v.callOutChange=function(e){return c(e)},v.setChangeDetectionFunction=function(e,t){null==t?delete i[e]:i[e]=t},p(),b.exports=v}.call(this)}},o={};function Xe(e){var t=o[e];if(void 0!==t)return t.exports;t=o[e]={exports:{}};return n[e].call(t.exports,t,t.exports,Xe),t.exports}Xe.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return Xe.d(t,{a:t}),t},Xe.d=(e,t)=>{for(var n in t)Xe.o(t,n)&&!Xe.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Xe.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),Xe.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Xe.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={},t=(Xe.r(e),Xe.d(e,{startUp:()=>H}),{}),n=(Xe.r(t),Xe.d(t,{appId:()=>q,defaultChannelId:()=>Z,p2pBootstrapPeers:()=>$,p2pWRTCStarServers:()=>_,reconnectTimeoutMS:()=>Q,websocketURL:()=>W}),{}),o=(Xe.r(n),Xe.d(n,{connect:()=>ie,disconnect:()=>ae,getUUID:()=>C,initialize:()=>F,sendMessage:()=>U}),{}),i=(Xe.r(o),Xe.d(o,{handleSDP:()=>ve,initialize:()=>re,initiateConnection:()=>D}),{}),a=(Xe.r(i),Xe.d(i,{addChatMessage:()=>qe,displayPeers:()=>Qe,initialize:()=>xe}),{});Xe.r(a),Xe.d(a,{modulesToDebug:()=>Ze});function r(t){var n;return{log:n=function(e){V[t]&&console.log("["+t+"]: "+e)},olog:function(e){return n("\n"+J(e))}}}var N,P,c={},J=(Xe.r(c),Xe.d(c,{initialize:()=>_e}),function(e){return JSON.stringify(e,null,4)}),V={};({log:N,olog:P}=r("appstartupmodule"));var s,l,A,u,d,p,f,h,g,v,z,m,y,w,H=function(){N("startUp")},W="wss://signalling-star.advice.land",Q=200,q="p2p-chat-demo",Z="#1",$=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt"],_=["/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star"],b=Xe(981),F=({log:u,olog:d}=r("websocketmodule"),l=!(p=!1),function(){u("initialize"),s=b.load("UUID"),d({UUID:s}),s=s||crypto.randomUUID(),b.save({UUID:s})}),X=function(e){u("websocketCaughtError"),d(e),u(e.reason)},G=function(e){l||p||(p=!0,setTimeout(ne,Q))},K=function(e){u("websocketConnected"),null!=g&&(g(),g=null),U("setuuid "+s)},Y=function(e){var t,n,o;switch(u("websocketMessageReceived"),u(e.data),(o=e.data.indexOf(" "))<0?n=e.data.trim():(n=e.data.substring(0,o),t=e.data.substring(o).trim()),n){case"alluids":ee(t);break;case"chat":te(t);break;case"sdp":ve(t);break;default:u("unknown key "+n)}},ee=function(e){u("applyAllUUIDS"),A=e.split(","),Qe(A)},te=function(e){u("handleChat"),u(e),qe(e)},ne=function(){p=!1,oe()},oe=function(){u("createSocket"),"undefined"!=typeof webSocketReady&&null!==webSocketReady||(h=new Promise(function(e,t){return g=e})),(f=new WebSocket(W)).onerror=X,f.onclose=G,f.onopen=K,f.onmessage=Y},U=async function(e){u("sendMessage "+e),l||(await h,f.send(e))},ie=function(){l=!1,oe()},ae=function(){null!==f&&(l=!0,f.close(),f=null)},C=function(){return s},re=({log:v,olog:z}=r("webrtcmodule"),w={},y={},m=s=g=h=f=null,function(){v("initialize")}),ce=async function(e){var t,n,o,i,a,r,c,s,l,u;v("initiateConnectionForVideo"),o=k(),(w[e]=o).adviceLandType="outConnection",o.adviceLandUUID=e,i={audio:!(webCamBlock.src="")};try{for(u=(m=null==m?await navigator.mediaDevices.getUserMedia(i):m).getTracks(),r=0,c=u.length;r<c;r++)l=u[r],o.addTrack(l,m);s=await o.createOffer(),a=new RTCSessionDescription(s),await o.setLocalDescription(a),t={type:"audio-offer",sourceUUID:C(),targetUUID:e,offerObj:s},n=JSON.stringify(t),U(`sdp ${e} `+n)}catch(e){v(e)}},se=async function(e){var t,n,o,i,a,r,c,s,l,u;v("initiateConnectionForVideo"),o=k(),(w[e]=o).adviceLandType="outConnection",o.adviceLandUUID=e,i={video:!0,audio:!0};try{for(null==m&&(m=await navigator.mediaDevices.getUserMedia(i),webCamBlock.srcObject=m),u=m.getTracks(),r=0,c=u.length;r<c;r++)l=u[r],o.addTrack(l,m);s=await o.createOffer(),a=new RTCSessionDescription(s),await o.setLocalDescription(a),t={type:"video-offer",sourceUUID:C(),targetUUID:e,offerObj:s},n=JSON.stringify(t),U(`sdp ${e} `+n)}catch(e){v(e)}},k=function(){var e;return v("createRTCPeerConnection"),(e=new RTCPeerConnection({iceServers:[{urls:"turn:stun.advice.land",username:"usr",credential:"cred"}]})).onicecandidate=le,e.ontrack=ue,e.onnegotiationneeded=de,e.onremovetrack=pe,e.oniceconnectionstatechange=fe,e.onicegatheringstatechange=he,e.onsignalingstatechange=ge,e},le=function(e){var t,n;v("handleICECandidateEvent"),z(e.candidate),v(e.target.adviceLandType),v(e.target.adviceLandUUID),null!=e.candidate&&(t=e.candidate,n=e.target.adviceLandType,e=e.target.adviceLandUUID,t={type:"ice-candidate",candidate:t},"outConnection"===n?(t.sourceUUID=C(),t.targetUUID=e,t.youAreTarget=!0):"inConnection"===n&&(t.sourceUUID=e,t.targetUUID=C()),n=JSON.stringify(t),U(`sdp ${e} `+n))},ue=function(e){v("handleTrackEvent"),incomingVideoStreamsBlock.srcObject=event.streams[0]},de=function(e){v("handleNegotiationNeededEvent")},pe=function(e){v("handleRemoveTrackEvent")},fe=function(e){v("handleICEConnectionStateChangeEvent")},he=function(e){v("handleICEGatheringStateChangeEvent")},ge=function(e){v("handleSignalingStateChangeEvent")},ve=async function(e){var t,n,o,i,a,r,c,s,l,u,d,p,f,h,g;v("handleSDP");try{if("video-offer"===(o=JSON.parse(e)).type){for(v("video-offer received"),r={video:!0,audio:!0},p=o.sourceUUID,a=k(),(y[p]=a).adviceLandType="inConnection",a.adviceLandUUID=p,c=new RTCSessionDescription(o.offerObj),await a.setRemoteDescription(c),null==m&&(m=await navigator.mediaDevices.getUserMedia(r),webCamBlock.srcObject=m),g=m.getTracks(),s=0,u=g.length;s<u;s++)h=g[s],a.addTrack(h,m);t=await a.createAnswer(),c=new RTCSessionDescription(t),await a.setLocalDescription(c),o={type:"video-answer",sourceUUID:o.sourceUUID,targetUUID:o.targetUUID,answerObj:t},i=JSON.stringify(o),U(`sdp ${p} `+i)}if("call-offer"===o.type){for(v("call-offer received"),r={audio:!0},p=o.sourceUUID,a=k(),(y[p]=a).adviceLandType="inConnection",a.adviceLandUUID=p,c=new RTCSessionDescription(o.offerObj),await a.setRemoteDescription(c),g=(m=null==m?await navigator.mediaDevices.getUserMedia(r):m).getTracks(),l=0,d=g.length;l<d;l++)h=g[l],a.addTrack(h,m);t=await a.createAnswer(),c=new RTCSessionDescription(t),await a.setLocalDescription(c),o={type:"audio-answer",sourceUUID:o.sourceUUID,targetUUID:o.targetUUID,answerObj:t},i=JSON.stringify(o),U(`sdp ${p} `+i)}"video-answer"===o.type&&(v("video-answer received"),f=o.targetUUID,a=w[f],c=new RTCSessionDescription(o.answerObj),await a.setRemoteDescription(c),v(" - > connection should be configured!")),"audio-answer"===o.type&&(v("audio-answer received"),f=o.targetUUID,a=w[f],c=new RTCSessionDescription(o.answerObj),await a.setRemoteDescription(c),v(" - > connection should be configured!")),"ice-candidate"===o.type&&(v("ice-candidate received"),n=new RTCIceCandidate(o.candidate),await(a=o.youAreTarget?y[o.sourceUUID]:w[o.targetUUID]).addIceCandidate(n),v(" - > added ICE Candidate"))}catch(e){v(e)}},D=function(e,t){switch(v("initiateConnection"),t){case"call":ce(e);break;case"video":se(e)}},me=Object.prototype.toString,B=Array.isArray||function(e){return"[object Array]"===me.call(e)};function I(e){return"function"==typeof e}function x(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ye(e,t){return null!=e&&"object"==typeof e&&t in e}var we=RegExp.prototype.test,be=/\S/,Ue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},Ce=/\s*/,ke=/\s+/,De=/\s*=/,Ie=/\s*\}/,Se=/#|\^|\/|>|\{|&|=|!/;function R(e){this.string=e,this.tail=e,this.pos=0}function S(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function T(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}R.prototype.eos=function(){return""===this.tail},R.prototype.scan=function(e){e=this.tail.match(e);if(!e||0!==e.index)return"";e=e[0];return this.tail=this.tail.substring(e.length),this.pos+=e.length,e},R.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},S.prototype.push=function(e){return new S(e,this)},S.prototype.lookup=function(e){var t,n,o,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var a,r,c,s=this,l=!1;s;){if(0<e.indexOf("."))for(a=s.view,r=e.split("."),c=0;null!=a&&c<r.length;)c===r.length-1&&(l=ye(a,r[c])||(n=a,o=r[c],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(o))),a=a[r[c++]];else a=s.view[e],l=ye(s.view,e);if(l){t=a;break}s=s.parent}i[e]=t}return t=I(t)?t.call(this.view):t},T.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},T.prototype.parse=function(e,L){var t=this.templateCache,n=e+":"+(L||M.tags).join(":"),o=void 0!==t,i=o?t.get(n):void 0;return null==i&&(i=function(e){if(!e)return[];var t,n,o,i,a=!1,r=[],c=[],s=[],l=!1,u=!1,d="",p=0;function f(){if(l&&!u)for(;s.length;)delete c[s.pop()];else s=[];u=l=!1}function h(e){if("string"==typeof e&&(e=e.split(ke,2)),!B(e)||2!==e.length)throw new Error("Invalid tags: "+e);t=new RegExp(x(e[0])+"\\s*"),n=new RegExp("\\s*"+x(e[1])),o=new RegExp("\\s*"+x("}"+e[1]))}h(L||M.tags);for(var g,v,m,y,w,b,U=new R(e);!U.eos();){if(g=U.pos,m=U.scanUntil(t))for(var C=0,k=m.length;C<k;++C)i=y=m.charAt(C),we.call(be,i)?(a=u=!0,d+=" "):(s.push(c.length),d+=y),c.push(["text",y,g,g+1]),g+=1,"\n"===y&&(f(),d="",p=0,a=!1);if(!U.scan(t))break;if(l=!0,v=U.scan(Se)||"name",U.scan(Ce),"="===v?(m=U.scanUntil(De),U.scan(De),U.scanUntil(n)):"{"===v?(m=U.scanUntil(o),U.scan(Ie),U.scanUntil(n),v="&"):m=U.scanUntil(n),!U.scan(n))throw new Error("Unclosed tag at "+U.pos);if(w=">"==v?[v,m,g,U.pos,d,p,a]:[v,m,g,U.pos],p++,c.push(w),"#"===v||"^"===v)r.push(w);else if("/"===v){if(!(b=r.pop()))throw new Error('Unopened section "'+m+'" at '+g);if(b[1]!==m)throw new Error('Unclosed section "'+b[1]+'" at '+g)}else"name"===v||"{"===v||"&"===v?u=!0:"="===v&&h(m)}if(f(),b=r.pop())throw new Error('Unclosed section "'+b[1]+'" at '+U.pos);for(var D,I=function(e){for(var t,n,o=[],i=0,a=e.length;i<a;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(o.push(t),n=t));return o}(c),S=[],T=S,E=[],O=0,j=I.length;O<j;++O)switch((D=I[O])[0]){case"#":case"^":T.push(D),E.push(D),T=D[4]=[];break;case"/":E.pop()[5]=D[2],T=0<E.length?E[E.length-1][4]:S;break;default:T.push(D)}return S}(e),o&&t.set(n,i)),i},T.prototype.render=function(e,t,n,o){var i=this.getConfigTags(o),i=this.parse(e,i),t=t instanceof S?t:new S(t,void 0);return this.renderTokens(i,t,n,e,o)},T.prototype.renderTokens=function(e,t,n,o,i){for(var a,r,c,s="",l=0,u=e.length;l<u;++l)c=void 0,"#"===(r=(a=e[l])[0])?c=this.renderSection(a,t,n,o,i):"^"===r?c=this.renderInverted(a,t,n,o,i):">"===r?c=this.renderPartial(a,t,n,i):"&"===r?c=this.unescapedValue(a,t):"name"===r?c=this.escapedValue(a,t,i):"text"===r&&(c=this.rawValue(a)),void 0!==c&&(s+=c);return s},T.prototype.renderSection=function(e,t,n,o,i){var a=this,r="",c=t.lookup(e[1]);if(c){if(B(c))for(var s=0,l=c.length;s<l;++s)r+=this.renderTokens(e[4],t.push(c[s]),n,o,i);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)r+=this.renderTokens(e[4],t.push(c),n,o,i);else if(I(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(t.view,o.slice(e[3],e[5]),function(e){return a.render(e,t,n,i)}))&&(r+=c)}else r+=this.renderTokens(e[4],t,n,o,i);return r}},T.prototype.renderInverted=function(e,t,n,o,i){var a=t.lookup(e[1]);if(!a||B(a)&&0===a.length)return this.renderTokens(e[4],t,n,o,i)},T.prototype.indentPartial=function(e,t,n){for(var o=t.replace(/[^ \t]/g,""),i=e.split("\n"),a=0;a<i.length;a++)i[a].length&&(0<a||!n)&&(i[a]=o+i[a]);return i.join("\n")},T.prototype.renderPartial=function(e,t,n,o){if(n){var i,a,r,c=this.getConfigTags(o),s=I(n)?n(e[1]):n[e[1]];if(null!=s)return i=e[6],r=e[5],e=e[4],a=s,0==r&&e&&(a=this.indentPartial(s,e,i)),r=this.parse(a,c),this.renderTokens(r,t,n,a,o)}},T.prototype.unescapedValue=function(e,t){t=t.lookup(e[1]);if(null!=t)return t},T.prototype.escapedValue=function(e,t,n){n=this.getConfigEscape(n)||M.escape,t=t.lookup(e[1]);if(null!=t)return("number"==typeof t&&n===M.escape?String:n)(t)},T.prototype.rawValue=function(e){return e[1]},T.prototype.getConfigTags=function(e){return B(e)?e:e&&"object"==typeof e?e.tags:void 0},T.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!B(e)?e.escape:void 0};var E,Te,M={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){O.templateCache=e},get templateCache(){return O.templateCache}},O=new T;M.clearCache=function(){return O.clearCache()},M.parse=function(e,t){return O.parse(e,t)},M.render=function(e,t,n,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(B(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return O.render(e,t,n,o)},M.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return Ue[e]})},M.Scanner=R,M.Context=S,M.Writer=T;const Ee=M;({log:E,olog:Te}=r("chatframemodule"));var Oe,je,j,Le=null,Be=null,L=[],xe=function(){E("initialize"),Re(),window.onhashchange=Re,chatInput.addEventListener("keydown",Me),chatInput.addEventListener("blur",Ne),Le=peerDisplayTemplate.innerHTML,E(Le),Be=chatElementTemplate.innerHTML,E(Be)},Re=function(){E("locationHashChanged"),("#chat"===location.hash?Je:Ve)()},Me=function(e){13===e.keyCode&&chatInput.value&&(Pe(),chatInput.value="")},Ne=function(e){chatInput.value&&(Pe(),chatInput.value="")},Pe=function(){var e=chatInput.value;U("to all "+e)},Je=function(){E("pullChatIn"),document.body.style.height="100vh",document.body.style.overflow="hidden",chatframe.classList.add("here"),ie()},Ve=function(){E("pushChatOut"),document.body.style.height="auto",document.body.style.overflow="scroll",chatframe.classList.remove("here"),ae(),chatHistoryBlock.innerHTML="",peerDisplayBlock.innerHTML="",L=[]},Ae=function(e){for(var t=0;!e.classList.contains("peer-display-element");)if(e=e.parentNode,3<++t)throw new Error("No nearby parent having class peer-display-element");return e.getAttribute("uuid")},ze=function(e){E("peerCallClicked"),e=Ae(e.target),E(e),D(e,"call")},He=function(e){E("peerVideoClicked"),e=Ae(e.target),E(e),D(e,"video")},We=function(){for(var e,t="",n=0,o=L.length;n<o;n++)e=L[n],t+=Ee.render(Be,e);chatHistoryBlock.innerHTML=t},Qe=function(e){for(var t,n,o,i,a,r,c,s,l="",u=0,d=e.length;u<d;u++)t={uuid:e[u]},l+=Ee.render(Le,t);for(peerDisplayBlock.innerHTML=l,null!=(c=peerDisplayBlock.querySelector(`[uuid='${C()}']`))&&c.classList.add("self"),o=0,a=(n=peerDisplayBlock.getElementsByClassName("peer-call-button")).length;o<a;o++)n[o].addEventListener("click",ze);for(i=0,r=(s=peerDisplayBlock.getElementsByClassName("peer-video-button")).length;i<r;i++)s[i].addEventListener("click",He)},qe=function(e){var t,n;E(e),t=""+(n=new Date).getHours(),n=""+n.getMinutes(),t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),L.unshift({text:e,time:t+":"+n}),64<L.length&&(L.length=64),E(L.length),We()},Ze={unbreaker:!0,websocketmodule:!0},$e=Ze;for(j in $e)$e[j]&&(V[j]=!0);({log:Oe,olog:je}=r("queryfieldmodule"));var _e=function(){Oe("initialize")};const Fe={appstartupmodule:e,chatframemodule:i,configmodule:t,debugmodule:a,queryfieldmodule:c,statemodule:b,webrtcmodule:o,websocketmodule:n};e=Xe(62);Xe.n(e)().initialize(),Xe.g.allModules=Fe,async function(){var t,n,e=function(){var e=[];for(n in Fe)null!=(t=Fe[n]).initialize&&e.push(t.initialize());return e}();await Promise.all(e)}()})()})()</script></body></html>